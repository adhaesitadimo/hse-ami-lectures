\input{header.tex}

\begin{document}

\section*{Лекция 20 от 24.03.2016}

\subsection{Вставка красно-чёрные деревья}

В прошлый раз мы получили, что высота красно-чёрного дерева --- $O(\log n)$, где $n$ --- число ключей.

Когда мы вставили новую вершину, мы назначаем ей красный цвет. При этом может нарушиться одно из свойств --- у красного только чёрный родитель.

Править мы будем, используя только две операции:
\begin{enumerate}
    \item Перекрашивание --- смена цвета на противоположный.
    \item Поворот --- за картинкой полезайте в Кормена, в общем.
\end{enumerate}

Вообще, тут куча графов, я не успеваю перерисовывать, я сфоткал, если что.

Сложность такого алгоритма --- $O(\log n)$ --- на изначальную вставку уходит $O(\log n)$; ошибки двигаются вверх не больше чем за два поворота и ?? перекрашиваний --- тоже $O(\log n)$.

\subsection{Самоорганизующийся список}
Представьте, что вы готовитесь к экзамену. У вас есть стопка книг (все в белых обложках) и вы ищете нужную вам, а найдя --- кладёте вверх.

Формализуем: есть список $L$. Есть операции access$(x, L)$ за rank$(x)$; transpose$(x, y)$ --- за $O(1)$, но меняем только соседние элементы.

Решать будем для онлайн-алгоритма --- он не знает всех наших будущих запросов.

Пусть $|L| = n$, $S$ --- множество операций.

Понятно, что сложность в худшем случае не может быть меньше $\Theta(n|S|)$, то есть $c_A(S) = \Omega(n|S|)$

Средний случай: пусть $p(x)$ --- вероятность обращения к $x$.

$E(c_A(S)) = \sum\limits_{x\in L}\left(p(x)\rk(x)\right)$

Эвристика MTF --- после доступа помещаем элемент вверх списка. Оценим MTF:

Для начала введём понятие $\alpha$-конкуррентности; алгоритм $\alpha$-конкуррентен, если $C_A(S) \leqslant \alpha\cdot C_{OPT}(S)+k$.

Пусть $L_i^A$ --- список после $i$ операций по алгоритму $A$; $C_i^A$ --- стоимость $i$-ой операции по алгоритму $A$.

$\Phi(L_i^{MTF}) = 2|\{(x, y)\mid\rk_{L_i^{MTF}}(x) < \rk_{L_i^{MTF}}(y),\ \rk_{L_i^{OPT}}(x) > \rk_{L_i^{OPT}}(y) \}|$

При этом после одной транспозиции $\Phi$ меняется на $\pm 2$
\end{document}
